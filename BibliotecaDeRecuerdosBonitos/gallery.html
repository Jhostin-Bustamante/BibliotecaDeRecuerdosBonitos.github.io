<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galería de Productos</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(to right, #ff7e67, #ffb347);
            color: #333;
            margin: 0;
            padding: 0;
            text-align: center;
        }

        .container {
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        h2 {
            color: #333;
            margin-bottom: 20px;
        }

        .gallery-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 20px;
        }

        .product-card {
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: transform 0.2s;
            position: relative;
        }

        .product-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .product-card:hover {
            transform: scale(1.05);
        }

        .product-card h3 {
            padding: 10px;
            text-align: center;
            background: #ff7e67;
            color: white;
            margin: 0;
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
        }

        .logout-btn {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            background-color: #333;
            color: white;
            font-size: 16px;
            text-decoration: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .logout-btn:hover {
            background-color: #555;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Galería de Recuerdos bonitos</h2>
        <div class="gallery-container">
            <div class="product-card">
                <a href="product.html?id=1">
                    <img src="imagenes/1.jpg" alt="Producto 1">
                    <h3>Recuerdo 1</h3>
                </a>
            </div>
            <div class="product-card">
                <a href="product.html?id=2">
                    <img src="imagenes/2.jpg" alt="Producto 2">
                    <h3>Recuerdo 2</h3>
                </a>
            </div>
            <div class="product-card">
                <a href="product.html?id=3">
                    <img src="imagenes/3.jpg" alt="Producto 3">
                    <h3>Recuerdo 3</h3>
                </a>
            </div>
            <div class="product-card">
                <a href="product.html?id=4">
                    <img src="imagenes/4.jpg" alt="Producto 4">
                    <h3>Recuerdo 4</h3>
                </a>
            </div>
            <div class="product-card">
                <a href="product.html?id=5">
                    <img src="imagenes/5.jpg" alt="Producto 5">
                    <h3>Recuerdo 5</h3>
                </a>
            </div>
            <div class="product-card">
                <a href="product.html?id=6">
                    <img src="imagenes/6.jpg" alt="Producto 6">
                    <h3>Recuerdo 6</h3>
                </a>
            </div>
            <div class="product-card">
                <a href="product.html?id=7">
                    <img src="imagenes/7.jpg" alt="Producto 7">
                    <h3>Recuerdo 7</h3>
                </a>
            </div>
            <div class="product-card">
                <a href="product.html?id=8">
                    <img src="imagenes/8.jpg" alt="Producto 8">
                    <h3>Recuerdo 8</h3>
                </a>
            </div>
            <div class="product-card">
                <a href="product.html?id=9">
                    <img src="imagenes/9.jpg" alt="Producto 9">
                    <h3>Recuerdo 9</h3>
                </a>
            </div>
        </div>
        <!-- Reproducción automática de audio al cargar la página -->
        <audio id="background-music" autoplay loop>
            <source src="Music/Interstellar.mp3" type="audio/mpeg">
            Tu navegador no soporta el elemento de audio.
        </audio>
        <a href="index.html" class="logout-btn" onclick="fadeOutAudio()">Cerrar Sesión</a>
    </div>

    <script>
        const audio = document.getElementById('background-music');
        const isFirstLoad = sessionStorage.getItem('isFirstLoad') === null;

        window.addEventListener('load', function() {
            if (isFirstLoad) {
                // Primera carga: iniciar música desde el principio
                audio.currentTime = 0;
                fadeInAudio();
                sessionStorage.setItem('isFirstLoad', 'false');
            } else {
                // No es la primera carga: continuar desde el punto guardado
                const storedTime = localStorage.getItem('audioTime');
                if (storedTime) {
                    audio.currentTime = storedTime;
                    fadeInAudio();
                }
            }
        });

        window.addEventListener('beforeunload', function() {
            // Guardar el tiempo de reproducción antes de navegar
            localStorage.setItem('audioTime', audio.currentTime);
        });

        function fadeInAudio() {
            audio.volume = 0;
            audio.play();
            let volume = 0;
            const fadeInInterval = setInterval(() => {
                volume += 0.05;
                if (volume >= 1) {
                    clearInterval(fadeInInterval);
                }
                audio.volume = volume;
            }, 250);
        }

        function fadeOutAudio() {
            let volume = 1;
            const fadeOutInterval = setInterval(() => {
                volume -= 0.05;
                if (volume <= 0) {
                    clearInterval(fadeOutInterval);
                    audio.pause();
                }
                audio.volume = volume;
            }, 250);
        }

        document.querySelector('.logout-btn').addEventListener('click', function() {
            fadeOutAudio();
            sessionStorage.removeItem('isFirstLoad'); // Reiniciar la música la próxima vez
        });
    </script>
</body>
</html>
